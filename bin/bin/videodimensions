#!/bin/sh

for f in "$@"; do
    NAME=$(basename "$f")
    INFO=$(ffprobe -v quiet -print_format json -show_format -show_streams "$f" | sed 's/^[ \t]*//')
    WIDTH=$(printf "$INFO" | grep -P '^"width": (\d+)' | tr -cd '[:digit:]')
    HEIGHT=$(printf "$INFO" | grep -P '^"height": (\d+)' | tr -cd '[:digit:]')
    printf "%s\t%s\t%s\n" "$NAME" "$WIDTH" "$HEIGHT"
done
